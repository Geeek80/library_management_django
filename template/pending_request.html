{% extends 'index.html' %}
{% load static %}
{% block title %} - Pending Requests{% endblock %}
    {% block content %}
    
            <div class="container h-100 d-flex justify-content-center mt-4">
                <div class="my-auto">
                <form action="/upload_csv" method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                <div class="form-group">
                    <div class="input-group mb-4">
                        <div class="row">
                            <div class="col">
                                <input type="file" name="document" required>
                            </div>
                            <div class="col">
                                <button class="btn btn-outline-info" type="submit">Upload Csv</button>
                            </div>
                        </div>
                    </div>
                    
                </div>
                <div class="text-center" style="color:red;">{{ error }}</div>
                </form>
            </div>
            </div>
        <center>
        <div class="container">

                {% if messages %}
                {% for message in messages %}
                <div class="card text-white {% if 'error' in message.tags %} bg-danger {% else %} bg-info {% endif %} mb-3" style="max-width: 20rem;">
                    <div class="card-header">{% if 'error' in message.tags %} Rejected {% else %} Approved {% endif %}</div>
                    <div class="card-body">
                        <h4 class="card-title">Request {% if 'error' in message.tags %} Rejected {% else %} Approved {% endif %}</h4>
                        <p class="card-text">
                            <ul class="messages">
                                    {{ message }}
                            </ul>
                        </p>
                
                    </div>
                </div>
                {% endfor %}
                {% endif %}
                

        <table class="table table-hover">
            {% if pending_data %}
            <thead>
                <tr class="table-primary">
                    <th>Request No.</th>
                    <th>Enrollment No.</th>
                    <th>Request Date</th>
                    <th>Receipt No.</th>
                    <th>Receipt Date</th>
                    <th>Amount</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            {% for req in pending_data %}
                <tr class="table-secondary">
                    <td class="text-center" style="color:black">{{req.id}}</td>
                    <td class="text-center" style="color:black">{{req.student_enrollment}}</td>
                    <td class="text-center" style="color:black">{{req.date}}</td>
                    <td class="text-center" style="color:black">{{req.receipt_no}}</td>
                    <td class="text-center" style="color:black">{{req.receipt_date}}</td>
                    <td class="text-center" style="color:black">{{req.amount}}</td>
                    <td class="text-center" style="color:black">{{req.status}}</td>
                    <td class="text-center" >
                        <a style="color:yellow" href="/view_request/{{req.id}}">View</a> / 
                        <a style="color:yellow" href="/approve">Approve</a>
                    </td>
                </tr>
            {% endfor %}

            {% else %}
                <h3>there are no pending requests</h3>
            {% endif %}
        </table>
    </div>
    </center>
    {% endblock %}
</body>
</html>